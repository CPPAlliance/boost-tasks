#!/usr/bin/env php
<?php

require_once(__DIR__.'/vendor/autoload.php');

use GetOptionKit\OptionCollection;

function main($args) {
    $specs = new OptionCollection;
    $specs->add('all', "Fully refresh pull requests.")
        ->defaultValue(false);
    $options = CommandLineOptions::process($_SERVER['argv'],
        'Update the pull request report from GitHub.', $specs);
    if (is_numeric($options)) { exit($options); }
    EvilGlobals::init($options);

    PullRequestReport::update($options['all']);
}

main($_SERVER['argv']);
